# R day3

> R day2에 이어서

## 2. R의 데이터셋

### 7. 리스트(list)

> 벡터, 행렬, 배열, 데이터 프레임 등 서로 다른 구조의 데이터를 하나로 묶을 수 있는 자료구조

- 저장 가능한 데이터의 타입, 데이터 셋의 종류에 제한이 없다.
- R에서는 통계 분석 결과가 __리스트 구조로 제시__되는 경우가 많다.



#### 리스트를 생성하고 부분집합 추출하기

> 리스트를 생성하기 위해서는 `list(이름 = 데이터셋)` 함수를 활용한다.
>
> 리스트에서 부분집합을 뽑아낼때는 `[]`, `[[]]`, `$`을 활용한다.

- `[]`: 리스트가 포함한 하위 리스트를 추출
- `[[]]`, `$`: 하위 리스트가 가지고 있는 원소를 추출하고, 계층 구조 수준을 한단계 제거한다.

```R
> a<-list(a = 1:3, b = "a string", c = pi, d = list(-1,-5))

> a
$a
[1] 1 2 3

$b
[1] "a string"

$c
[1] 3.141593

$d
$d[[1]]
[1] -1

$d[[2]]
[1] -5

> a[1]
$a
[1] 1 2 3

> a[[1]]
[1] 1 2 3

> a$a
[1] 1 2 3
```



#### 리스트의 연산

> 리스트 그 자체로는 연산할 수 없다.
>
> 리스트를 벡터로 반환하는 `unlist(리스트)`를 활용하거나, 부분집합을 추출해 연산하자!

```R
> lds <- list(1,2,3) 
> lds+100
Error in lds + 100 : 이항연산자에 수치가 아닌 인수입니다

> unlist(lds)+100
[1] 101 102 103

> lds[1]+10 # []는 리스트를 추출하기 때문에 연산 불가능
Error in lds[1] + 10 : 이항연산자에 수치가 아닌 인수입니다

> lds[[1]]+10
[1] 11
```



## 3. 제어문

> 조건에 따라 수행여부를 설정할 경우 `if`, 필요한 만큼 반복 수행할 때 `for`, `while`, `repeat` 라는 제어문을 사용한다.

- 여러 제어문을 사용하는 경우 `{}`을 사용해 구성한다.

- `ifelse`를 사용하지 않는 조건 `if`문

  ```R
  if(조건1){
  	수행 명령1
  } else if(조건2){
  	수행 명령2
  } ... {
  } else{
  	수행 명령
  }
  ```

  ```R
  score <- sample(0:100, 1)
  if (score >=90){
    cat(score,"는 A등급입니다","\n")
  }else if (score >=80){
    cat(score,"는 B등급입니다","\n")
  }else if (score >=70){
    cat(score,"는 C등급입니다","\n")
  }else if (score >=60){
    cat(score,"는 D등급입니다","\n")
  }else {
    cat(score,"는 F등급입니다","\n")
  }
  
  81 는 B등급입니다 
  ```

  

- 조건문을 간단하게 사용하는 `switch` 함수

  ```R
  switch(EXPR=수치데이터, 식1, 식2, 식3, ...)
  switch(EXPR=문자열데이터, 비교값1=식1, 비교값2=식2, ...)
  ```

  ```R
  > num <- sample(1:10,1)
  > num
  [1] 3
  > switch(EXPR = num,"A","B","C","D")
  [1] "C"
  
  > month <- sample(1:12,1)
  > month <- paste(month,"월",sep="") # "3월"  "3 월"
  > result <- switch(EXPR=month,
  +                  "12월"=,"1월"=,"2월"="겨울",
  +                  "3월"=,"4월"=,"5월"="봄",
  +                  "6월"=,"7월"=,"8월"="여름",
  +                  "가을")
  > cat(month,"은 ",result,"입니다\n",sep="")
  3월은 봄입니다
  ```



- 반복문 `for`

  ```R
  for (변수 in 데이터셋)
  	수행명령문장
  ```

  ```R
  > for(data in month.name) 
  +   print(data)
  [1] "January"
  [1] "February"
  [1] "March"
  [1] "April"
  [1] "May"
  [1] "June"
  [1] "July"
  [1] "August"
  [1] "September"
  [1] "October"
  [1] "November"
  [1] "December"
  ```

- 반복문 `while`

  ```R
  while (조건)
  	수행명령문장
  ```

  ```R
  > i<-1
  > while (i<=10) {
  +   cat(i,"\n")
  +   i<-i+2
  + }
  1 
  3 
  5 
  7 
  9 
  ```

- `repeat` 은 `while(TRUE)`와 동일

  ```R
  repeat 명령문
  ```

  ```R
  > repeat {
  +   cat("ㅋㅋㅋ\n")
  + }
  ㅋㅋㅋ
  ㅋㅋㅋ
  ... # 무한 반복
  ```

- `repeat`의 무한 루프에서 벗어나기 위해 분기문 `break`, `next`가 필요

  - `break`: 해당 반복문을 종료

    ```R
    > sumNumber <- 0
    > repeat { 
    +   i <- sample(1:5, 1) 
    +   sumNumber <-sumNumber+i; 
    +   cat(sumNumber,"\n")
    +   if(sumNumber > 20)
    +     break;
    + }
    3 
    7 
    10 
    12 
    17 
    19 
    23 
    ```

  - `next`: 현재 반복을 종료(생략)하고 다음 반복문으로 이동

    ```R
    > sum <-0
    > for(i in 5:15){
    +   if(i%%10==0){
    +     next;
    +   }
    +   sum <- sum + i
    +   print(paste(i,":",sum))
    + }
    [1] "5 : 5"
    [1] "6 : 11"
    [1] "7 : 18"
    [1] "8 : 26"
    [1] "9 : 35"
    [1] "11 : 46"
    [1] "12 : 58"
    [1] "13 : 71"
    [1] "14 : 85"
    [1] "15 : 100"
    ```

- 반복문내에서 화면에 결과를 출력하고 싶으면 출력함수인 `print`나 `cat`을 활용하자!

